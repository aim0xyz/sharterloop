<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#0c0c2d">
  <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=()">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='40' fill='%2300f3ff'/%3E%3Ccircle cx='50' cy='50' r='20' fill='%23f300ff'/%3E%3C/svg%3E">
  <title>Shatterloop - Aether Drifter</title>
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  
	<!-- Linking a CSS file -->
<link rel="stylesheet" href="style.css">

</head>
<body>
	
	<!-- Loading Screen -->
<div id="loadingScreen">
  <div class="loading-content">
    <div class="loading-logo">SHATTERLOOP</div>
    <div class="loading-spinner"></div>
    <div class="loading-text" id="loadingText">Initializing quantum matrix...</div>
    <div class="loading-progress">
      <div class="loading-progress-bar"></div>
    </div>
  </div>
</div>
	
  <div id="gameContainer">
    <canvas id="gameCanvas"></canvas>
    <div class="time-bend-effect" id="timeBendEffect"></div>
    <div id="uiContainer">
      <div class="score-display">Score: <span id="scoreValue">0</span></div>
      <div class="shard-count">‚ú¶ <span id="shardValue">0</span></div>
      <div class="movement-hint" id="movementHint">Move anywhere!</div>
      <div class="time-bend-ui" id="timeBendBtn">
        <div class="time-bend-icon">‚è≥</div>
        <div class="time-bend-cooldown" id="timeBendCooldown"></div>
        <div class="time-bend-counter" id="timeBendCounter">1</div>
      </div>
    </div>
    
    <div id="menuScreen">
      <h1>SHATTERLOOP</h1>
      <p>Guide the Aether Drifter through fractal dimensions. Bend time, collect shards, and master the loop. Choose your path wisely...</p>
      
      <button class="menu-btn" id="safeModeBtn">SAFE PATH</button>
      <button class="menu-btn fracture" id="fractureModeBtn">FRACTURE PATH</button>
      <button class="menu-btn" id="shopBtn">UPGRADES & RELICS</button>
      <button class="menu-btn" id="leaderboardBtn">LEADERBOARD</button>
      <button class="menu-btn" id="dailyCheckInBtn">DAILY CHECK-IN</button>
      <button class="menu-btn" id="referralBtn">REFERRALS</button>
      <div class="user-badge" id="userBadge">üë§</div>
    </div>
    
    <div id="gameOverScreen">
      <h2>Run Over ‚ùå</h2>
      <div class="stats-container">
        <div class="stat-row">
          <span class="stat-label">Time Survived:</span>
          <span class="stat-value" id="timeSurvived">0:00</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Final Score:</span>
          <span class="stat-value" id="finalScore">0</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Shards Collected:</span>
          <span class="stat-value shards" id="shardsCollected">0</span>
        </div>
      </div>
      <div class="menu-btn-container">
        <button class="menu-btn" id="retryBtn">Retry</button>
				<button class="menu-btn fracture" id="fractureRetryBtn">FRACTURE PATH</button>
        <button class="menu-btn" id="menuBtn">Main Menu</button>
      </div>
    </div>
    
    <div id="shopScreen">
      <h1>UPGRADE STATION</h1>
      <div class="shop-header">
        <div>Total Shards:</div>
        <div class="total-shards">‚ú¶ <span id="totalShards">0</span></div>
      </div>
      <div class="upgrade-card">
        <div class="upgrade-header">
          <div class="upgrade-title">Time Bend Capacity</div>
          <div class="upgrade-cost" id="timeBendCost">50 ‚ú¶</div>
        </div>
        <div class="upgrade-desc">Increase the number of time bends you can use per run.</div>
        <div class="upgrade-level">
            <span>Current Uses: <span id="timeBendLevel">1</span></span>
        </div>
        <button class="buy-btn" id="upgradeTimeBendBtn">Upgrade</button>
      </div>
      <div class="upgrade-card">
        <div class="upgrade-header">
          <div class="upgrade-title">Shard Magnet</div>
          <div class="upgrade-cost" id="magnetCost">30 ‚ú¶</div>
        </div>
        <div class="upgrade-desc">Increases collection radius for shards.</div>
         <div class="upgrade-level">
            <span>Current Level: <span id="magnetLevel">0</span></span>
        </div>
        <button class="buy-btn" id="upgradeMagnetBtn">Upgrade</button>
      </div>
      <div class="upgrade-card">
        <div class="upgrade-header">
          <div class="upgrade-title">Phantom Relic</div>
          <div class="upgrade-cost" id="phantomCost">120 ‚ú¶</div>
        </div>
        <div class="upgrade-desc">Grants ability to phase through obstacles. Each level adds 1 phase-through per run.</div>
        <div class="upgrade-level">
            <span>Current Level: <span id="phantomLevel">0</span></span>
        </div>
        <button class="buy-btn" id="buyRelicBtn">Upgrade</button>
      </div>
      <button class="menu-btn" id="backToMenuBtn" style="margin-top: 20px;">Back to Main Menu</button>
    </div>
    
    <div id="leaderboardScreen">
      <h1>LEADERBOARD</h1>
      <div class="leaderboard-tabs">
        <div class="leaderboard-tab active" data-type="score">Highest Score</div>
        <div class="leaderboard-tab" data-type="shards">Most Shards</div>
        <div class="leaderboard-tab" data-type="referrals">Top Referrers</div>
      </div>
      <div class="leaderboard-list" id="leaderboardList">
        <div class="spinner"></div>
      </div>
      <button class="menu-btn" id="leaderboardBackBtn" style="margin-top: 20px;">Back to Main Menu</button>
    </div>
    
    <div id="dailyCheckInScreen">
      <h1>DAILY CHECK-IN</h1>
      <div class="calendar-container">
        <div class="calendar-header">
          <div class="calendar-title">Weekly Rewards</div>
          <div class="calendar-streak">Streak: <span id="streakCount">0</span> days</div>
        </div>
        <div class="calendar-days" id="calendarDays">
          <!-- Will be populated dynamically -->
        </div>
        <button class="claim-btn" id="claimDailyBtn">Claim Today's Reward</button>
      </div>
      <button class="menu-btn" id="dailyCheckInBackBtn">Back to Main Menu</button>
    </div>
    
    <div id="referralScreen">
      <h1>REFERRALS</h1>
      <div class="referral-container">
        <div class="referral-header">
          <div class="referral-title">Your Referral Code</div>
          <div class="referral-desc">Share this code with friends. You'll both get 50 shards when they use it!</div>
        </div>
        <div class="referral-code-container">
          <div class="referral-code" id="myReferralCode">LOADING...</div>
          <button class="copy-btn" id="copyCodeBtn">Copy</button>
        </div>
        <div class="referral-stats">
          <div>Friends Referred: <span id="friendsReferred">0</span></div>
          <div>Shards Earned: <span id="referralShards">0</span></div>
        </div>
        
        <div class="friend-referral" id="friendReferralSection">
          <div class="friend-referral-title">Enter Friend's Code</div>
          <input type="text" class="friend-code-input" id="friendCodeInput" placeholder="Enter code" maxlength="8">
          <button class="submit-code-btn" id="submitCodeBtn">Submit</button>
          <div class="referral-status" id="referralStatus"></div>
        </div>
      </div>
      <button class="menu-btn" id="referralBackBtn">Back to Main Menu</button>
    </div>
    
    <div id="profileScreen">
      <h1>PROFILE</h1>
      
      <div class="user-profile">
        <div class="user-info">
          <div class="user-avatar" id="profileAvatar">üë§</div>
          <div>
            <div class="user-name" id="profileName">User Name</div>
            <div class="user-email" id="profileEmail">user@example.com</div>
          </div>
        </div>
        <button class="logout-btn" id="profileLogoutBtn">Log Out</button>
      </div>
      
      <div class="profile-container">
        <div class="profile-section">
          <div class="profile-title">Change Username</div>
          <div class="profile-field">
            <div class="profile-field-label">Username</div>
            <input type="text" class="profile-input" id="usernameInput" placeholder="Enter new username">
          </div>
          <button class="save-profile-btn" id="saveUsernameBtn">Save Username</button>
          <div class="profile-error" id="usernameError"></div>
          <div class="profile-success" id="usernameSuccess"></div>
        </div>
        
        <div class="profile-section">
          <div class="profile-title">Change Password</div>
          <div class="profile-field">
            <div class="profile-field-label">Current Password</div>
            <input type="password" class="profile-input" id="currentPasswordInput" placeholder="Enter current password">
          </div>
          <div class="profile-field">
            <div class="profile-field-label">New Password</div>
            <input type="password" class="profile-input" id="newPasswordInput" placeholder="Enter new password">
          </div>
          <div class="profile-field">
            <div class="profile-field-label">Confirm New Password</div>
            <input type="password" class="profile-input" id="confirmNewPasswordInput" placeholder="Confirm new password">
          </div>
          <button class="save-profile-btn" id="savePasswordBtn">Update Password</button>
          <div class="profile-error" id="passwordError"></div>
          <div class="profile-success" id="passwordSuccess"></div>
        </div>
      </div>
      
      <button class="menu-btn" id="profileBackBtn">Back to Main Menu</button>
    </div>
    
    <div id="authScreen">
      <h1 id="authTitle">Sign In</h1>
      
      <div class="auth-container" id="signInContainer">
        <div class="auth-error" id="authError"></div>
        <input type="email" class="auth-input" id="emailInput" placeholder="Email" autocomplete="email">
        <input type="password" class="auth-input" id="passwordInput" placeholder="Password" autocomplete="current-password">
        <button class="auth-btn" id="signInBtn">Sign In</button>
        
        <div class="auth-divider">or</div>
        
        <button class="social-btn google" id="googleSignInBtn">
          <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
          Sign in with Google
        </button>
        
        <div class="auth-switch">
          Don't have an account? <button class="auth-switch-btn" id="switchToSignUpBtn">Sign Up</button>
        </div>
      </div>
      
      <div class="auth-container" id="signUpContainer" style="display: none;">
        <div class="auth-error" id="signUpError"></div>
        <input type="text" class="auth-input" id="usernameSignUpInput" placeholder="Username (for leaderboard)" autocomplete="username">
        <input type="email" class="auth-input" id="signUpEmailInput" placeholder="Email" autocomplete="email">
        <input type="password" class="auth-input" id="signUpPasswordInput" placeholder="Password" autocomplete="new-password">
        <input type="password" class="auth-input" id="confirmPasswordInput" placeholder="Confirm Password" autocomplete="new-password">
        <button class="auth-btn" id="signUpBtn">Sign Up</button>
        
        <div class="auth-switch">
          Already have an account? <button class="auth-switch-btn" id="switchToSignInBtn">Sign In</button>
        </div>
      </div>
    </div>
    
    <div class="relic-popup" id="relicPopup">
      <div class="relic-icon">üí†</div>
      <div class="relic-title">PHANTOM PHASE</div>
      <div class="relic-desc">You've upgraded the Phantom Phase relic! Tap the icon during gameplay to phase through obstacles.</div>
      <button class="relic-btn" id="relicCloseBtn">Continue</button>
    </div>
  </div>
	
<!-- Linking a JavaScript file -->
<script src="script.js"></script>

</body>
</html>